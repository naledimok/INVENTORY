<!DOCTYPE html>
<html>
<head>
    <title>Inventory</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"></script>
   
</head>
<body>
    <div class="button-container">
        <a href="{% url 'update_inventory' %}" class="update-button">Update Inventory</a>
        {% comment %} <a href="{% url 'history' %}" class="update-button">Products</a> {% endcomment %}
    </div>
    <h1>Inventory</h1>
    <form method="post" action="{% url 'save_inventory' %}" class="inventory-form">
        {% csrf_token %}
        <label for="item_id">Item ID:</label>
        <input type="text" id="item_id" name="item_id"><br>
        
        <label for="item_name">Item Name:</label>
        <input type="text" id="item_name" name="item_name"><br>
        
        <label for="category">Category:</label>
        <input type="text" id="category" name="category"><br>
        
        <label for="supplier">Supplier:</label>
        <input type="text" id="supplier" name="supplier"><br>
        
        <label for="quantity_in_stock">Quantity in Stock:</label>
        <input type="number" id="quantity_in_stock" name="quantity_in_stock"><br>
        
        <label for="unit_of_measure">Unit of Measure:</label>
        <input type="text" id="unit_of_measure" name="unit_of_measure"><br>
        
        <label for="reorder_level">Reorder Level:</label>
        <input type="number" id="reorder_level" name="reorder_level"><br>
        
        <label for="reorder_quantity">Reorder Quantity:</label>
        <input type="number" id="reorder_quantity" name="reorder_quantity"><br>
        
        <label for="purchase_price">Purchase Price:</label>
        <input type="number" step="0.01" id="purchase_price" name="purchase_price"><br>
        
        <label for="selling_price">Selling Price:</label>
        <input type="number" step="0.01" id="selling_price" name="selling_price"><br>
        
        <label for="date_of_last_order">Date of Last Order:</label>
        <input type="date" id="date_of_last_order" name="date_of_last_order"><br>
        
        <label for="expiration_date">Expiration Date:</label>
        <input type="date" id="expiration_date" name="expiration_date"><br>
        
        <label for="storage_location">Storage Location:</label>
        <input type="text" id="storage_location" name="storage_location"><br>
        
        <label for="notes">Notes:</label>
        <textarea id="notes" name="notes"></textarea><br>
        
        <button type="submit">Save Inventory</button>
    </form>
    <br>
    <br>
    <br>
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <a href="{% url 'inventory_pdf' %}" class="btn btn-primary">Download Inventory as PDF</a>
        <a href="{% url 'delete_all' %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete all inventory items?');">Delete All Inventory</a>
    </div>
    <table class="inventory-table">
        <thead>
            <tr>
                <th>Item ID</th>
                <th>Item Name</th>
                <th>Category</th>
                <th>Supplier</th>
                <th>Quantity in Stock</th>
                <th>Unit of Measure</th>
                <th>Reorder Level</th>
                <th>Reorder Quantity</th>
                <th>Purchase Price</th>
                <th>Selling Price</th>
                <th>Date of Last Order</th>
                <th>Expiration Date</th>
                <th>Storage Location</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.item_id }}</td>
                <td>{{ item.item_name }}</td>
                <td>{{ item.category }}</td>
                <td>{{ item.supplier }}</td>
                <td>{{ item.quantity_in_stock }}</td>
                <td>{{ item.unit_of_measure }}</td>
                <td>{{ item.reorder_level }}</td>
                <td>{{ item.reorder_quantity }}</td>
                <td>{{ item.purchase_price }}</td>
                <td>{{ item.selling_price }}</td>
                <td>{{ item.date_of_last_order }}</td>
                <td>{{ item.expiration_date }}</td>
                <td>{{ item.storage_location }}</td>
                <td>{{ item.notes }}</td>
                <td>
                    <form method="post" action="{% url 'delete_inventory_item' item.item_id %}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                        {% csrf_token %}
                        <button type="submit">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
